```
title: "Использование мыши"
apiPath: input/mouse/FlxMouse.html
```

Ввод с мыши в HaxeFlixel обеспечивается с помощью классов `FlxMouse` и фронтенда `FlxG.mouse`. Надо отметить, что от расширяет `FlxPoint`.

Для немобильных таргетов курсор мыши является видимым по умолчанию. Вы можете управлять видимостью через `FlxG.mouse.visible`.

## Левая кнопка мыши

Наиболее часто фронтенд `FlxG.mouse` используется для проверки состояния левой кнопки мыши.

``` haxe
override public function update(elapsed:Float):Void
{
	if (FlxG.mouse.pressed)
	{
		// Левая клавиша мыши нажата
	}
	
	if (FlxG.mouse.justPressed)
	{
		// Левая клавиша мыши только что была нажата
	}
	
	if (FlxG.mouse.justReleased)
	{
		// Левая клавиша мыши только что была отпущена
	}

	super.update(elapsed);
}

```

В точности такая же длогика может быть исползована для средней и правой кнопок мыши. В название свойства будет добавлена часть `Middle` / `Right`, например `FlxG.mouse.pressedRight`.

## Курсор

```haxe
import flixel.util.FlxColor;
using flixel.util.FlxSpriteUtil;

// Создается белый круг для использования в качестве курсора
var sprite = new FlxSprite();
sprite.makeGraphic(15, 15, FlxColor.TRANSPARENT);
sprite.drawCircle();

// Загружаем графику спрайта в курсор
FlxG.mouse.load(sprite.pixels);

// Возвращаем курсор по умолчанию
FlxG.mouse.unload();

// Используем системный курсор
FlxG.mouse.useSystemCursor = true;
```

## Координаты курсора

Существует два способа получить координаты курсора:

* #### Абсолютное положение
	
	```haxe
	FlxG.mouse.x
	FlxG.mouse.y
	FlxG.mouse.getWorldPosition(); // вернет x / y как FlxPoint
	```

* #### Экранное положение
	
	```haxe
	FlxG.mouse.screenX
	FlxG.mouse.screenY
	FlxG.mouse.getScreenPosition(); // вернет screenX / screenY как FlxPoint
	```

## Колесо мыши

Текущще значение "delta" колеса мыши определяется свойством типа `Int`. Если колесо было прокручено вверх, оно будет иметь положительное значение, если вниз -  то отрицательное. Если прокрутки не было в текущем кадре, то значение будет равным 0.

```haxe
if (FlxG.mouse.wheel != 0)
{
	// Логика для колеса мыши, например зум:
	FlxG.camera.zoom += (FlxG.mouse.wheel / 10);
}
```

## Нативный Flash API курсора

AS3-Flixel использует простой `Sprite` для отображения растровой графики, которая синхронизируется с положением мыши в каждом фрейме. Этот подход не является оптимальным, т.к. часто приводит к лагам маши - графика курсора отстает от реального положения мыши. В зависимости от фпс игры и скорости мыши, это может быть очень заметным и, таким образом, негативно отразиться на общем впечатлении от игры.

HaxeFlixel улучшил [нативный Flash API курсора](http://www.adobe.com/devnet/flashplayer/articles/native-mouse-cursors.html) для лучшей производительности. Однако есть некоторые ограничения для нативных курсоров:

 * Они не могут превышать размер 32х32 пикселя
 * Отрицательные смещения курсора запрещены, а положительные ограничены максимальным размером курсора
 * Целевая версия flash плера должна быть 10.2 или выше

Поэтому использование API нативного курсора полностью опционально, см. раздел условных выражений `FLX_NO_NATIVE_CURSOR`.

### Кастомный нативный курсор

Вы можете использовать `FlxG.mouse.load()` для нативных курсоров как обычно, но если вы хотите иметь больший контроль, вы можете использовать следующие функции

```haxe
FlxG.mouse.setSimpleNativeCursorData("custom", BitmapData);
FlxG.mouse.registerNativeCursor("custom", MouseCursorData);
```

Больше информации по объекту `MouseCursorData` вы можете найти [здесь](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/ui/MouseCursorData.html).


Используйте `FlxG.mouse.setNativeCursor()` для переключения заранее зарегистрированного нативного курсора. 

### Условные выражения

Для общей информации по условным выражениям ознакомьтесь с [этой страницей](http://haxeflixel.com/documentation/compiler-conditionals/).

* ### `FLX_NO_MOUSE_ADVANCED`
	
	По-умолчанию слушатели событий заданы для средней и правой кнопки мыши. Есть две причины для их отключения:
	
	* этот функционал требует версию flash плеера 11.2 или выше
	* этот функционал убирает контекстное меню flash плеера
	
* ### `FLX_NO_NATIVE_CURSOR`

	Отключает API нативного курсора во flash плеере. Более подробно описано выше в разделе "Нативный Flash API курсора".
	
* ### `FLX_NO_MOUSE`

	Этот флаг позволяет вам полностью отключить любой код, который завязан на вводе с мыши (например для мобильных платформ). Поэтому в шаблоне добавлена конструкция `if="mobile"` в настройках проекта `Project.xml`.
