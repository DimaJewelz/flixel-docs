```
title: "HaxeFlixel условная компиляция"
```

### Что такое "условная компиляция"?

[Флаги условной компиляции](http://haxe.org/manual/lf-condition-compilation.html) довольно мощная вещь, которая позволяет оптимизировать ваш код, компилируя только часть его. Например, следующий псевдокод оптимизирует ввод на основе целевой платформы:

``` haxe
#if (web || desktop)
keyboardControls();
mouseControls();
#end

#if desktop
gamepadControls();
#end

#if mobile
touchControls();
#end
```

В целом это означает, что для таргетов web или desktop мы хотим управлять игрой с мыши и клавиатуры. В случае с таргетом под mobile, нам пригодится ввод с помошью тачей. Как вы можете видеть, эти так называемые обозначения также могут быть вложенными: мы хотим чтобы контроллер геймпада был доступен только для desktop таргета. В целом эти обозначения могут использоваться как традиционные if-выражения, за исключением того, что их синтаксис немного меняется.

Для более подробной информации о том, какие еще обозначения доступны, ознакомьтесь с [документацией OpenFL](http://www.openfl.org/archive/developer/documentation/conditional-compilation/).

### HaxeFlixel пользовательские обозначения

Если вы посмотрели документацию по OpenFL, то возможно заметили, что вы можете создавать собственные обозначения. При работе с OpenFL это удобно делать в XML файле проекта.
HaxeFlixel использует эту функцию и предоставляет вам возможность оптимизировать игру, использую следующие обозначения (полный список доступен в [шаблоне](https://github.com/HaxeFlixel/flixel-templates/blob/master/default/Project.xml.tpl)):

```
// Пример узла xml дял включения функционала записи Flixel.
<haxedef name="FLX_RECORD" />
```

#### FLX_RECORD

Flixel предоставляет удобный функицонал для записи и воспроизведения событий ввода мыши и клавиатуры. Т.к. эта функция используется не так часто, мы отключили ее по умолчанию. Установка этого флага включает эту функицю.

#### FLX_MOUSE_ADVANCED

Этот флаг требуется для включения средней и правой кнопки мыши. Для flash таргета необходима минимальная версия пллера 11.2. Включение этой функции также делает невозможным вызов контекстного меню flash плеера по клику правой кнопки мыши. Для таргета HTML5 пока эта функция не поддерживается.

#### FLX_NO_NATIVE_CURSOR

По умолчанию Flixel использует [API курсора flash таргета](http://www.adobe.com/devnet/flashplayer/articles/native-mouse-cursors.html). Это избавляет от задержки курсора, что в противном случае неизбежно. Этот флаг позволяет вам отключить эту функцию (например если вы хотите использовать версию флеш плеера ниже чем 10.2 или вам нужен курсор больше чем 32х32 пикслея, что невозможно, используя стандартный API).

#### FLX_NO_MOUSE

Этот флаг позволяет вам полностью отключить любой код, который завязан на вводе с мыши (например для мобильных платформ). Поэтому в шаблоне добавлена конструкция `if="mobile"`. Имейте в виду, что для этого может потребоваться использование условных выражений в вашем собственном коде для чего-либо, связанного с фронтендом `FlxG.mouse`, которого не существует, если включен этот флаг.

#### FLX_NO_KEYBOARD

Этот флаг позволяет вам полностью отключить любой код, который завязан на вводе с клавиатуры (например для мобильных платформ). Поэтому в шаблоне добавлена конструкция `if="mobile"`. Имейте в виду, что для этого может потребоваться использование условных выражений в вашем собственном коде для чего-либо, связанного с фронтендами `FlxG.keyboard` или `FlxG.keys`, которых не существует, если включен этот флаг.

#### FLX_NO_TOUCH

Этот флаг позволяет вам полностью отключить любой код, который завязан на вводе с помощью тачей (например для таргетов под desktop). Поэтому в шаблоне добавлена конструкция `if="desktop"`. Имейте в виду, что для этого может потребоваться использование условных выражений в вашем собственном коде для чего-либо, связанного с фронтендом `FlxG.touches`, которого не существует, если включен этот флаг.

#### FLX_NO_GAMEPAD

Этот флаг позволяет вам полностью отключить любой код, который завязан на вводе с помощью геймпада. Имейте в виду, что для этого может потребоваться использование условных выражений в вашем собственном коде для чего-либо, связанного с фронтендом `FlxG.gamepads`, которого не существует, если включен этот флаг.

#### FLX_NO_SOUND_TRAY

Этот флаг выключает визуальное окно, которое появляется, когда вы прибавляете / убавляете громкость или выключаете звук. Обратите внимание, что сам функционал управлением звука не отключается. Вы можете полностью отключить регулировку громкости, установив `FlxG.sound.muteKeys`, `FlxG.sound.volumeUpKeys` и `FlxG.sound.volumeDownKeys` в `null`.

#### FLX_NO_FOCUS_LOST_SCREEN

Flixel автоматически ставит игру на паузу, когда игра теряет фокус и показывает т.н. "Экран потери фокуса", которй фактически затемняет экран и показывает кнопку "play" в центре. Этот флаг убирает данный экран, но не функционал постановки на паузу при потере фокуса. Используйте `FlxG.autoPause` для этого.

#### FLX_NO_DEBUG

Этот флаг отключает дебаггер, который вы можете показывать, используя клавиши \ и \`. Это актуально для релиз билдов, поэтому в шаблон конфигурации добавлен `unless="debug"`. Фактически это означает, что дебаггер отключен, когда вы компилируете release билд, и включен при компиляции debug билда.
